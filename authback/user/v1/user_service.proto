syntax = "proto3";
package authback.user.v1;

import "authback/user/v1/user.proto";
import "google/protobuf/timestamp.proto";

service UserService {
  // ユーザ一覧取得
  rpc ListUsers(ListUsersRequest) returns (ListUsersResponse) {}
  // ユーザ取得
  rpc GetUser(GetUserRequest) returns (GetUserResponse) {}
  // ユーザ取得
  rpc GetUserByEmail(GetUserByEmailRequest) returns (GetUserByEmailResponse) {}
  // ユーザ作成
  rpc CreateUser(CreateUserRequest) returns (CreateUserResponse) {}
  // ユーザ編集
  rpc UpdateUser(UpdateUserRequest) returns (UpdateUserResponse) {}
  // ユーザ論理削除
  rpc SoftDeleteUser(SoftDeleteUserRequest) returns (SoftDeleteUserResponse) {}
  // ユーザ削除
  rpc DeleteUser(DeleteUserRequest) returns (DeleteUserResponse) {}
  // ユーザインポート
  rpc ImportUsers(ImportUsersRequest) returns (ImportUsersResponse) {}
  // 利用規約の合意
  rpc AgreeContract(AgreeContractRequest) returns (AgreeContractResponse) {}
}

message ListUsersRequest {
  string tenant_id = 1;
  optional string condition = 2;
  optional string role = 3;
  optional bool is_deleted = 4;
  optional InviteStatus invite_status = 5;
  repeated UserTag tags = 6;
  optional string order_by = 900;
  optional string order = 901;
  int64 limit = 902;
  int64 offset = 903;
}
message ListUsersResponse {
  repeated User users = 1;
  int64 count = 2;
}
message GetUserRequest {
  string user_id = 1;
}
message GetUserResponse {
  User user = 1;
}
message GetUserByEmailRequest {
  string tenant_id = 1;
  string email = 2;
}
message GetUserByEmailResponse {
  User user = 1;
}
message CreateUserRequest {
  User user = 1;
}
message CreateUserResponse {
  google.protobuf.Timestamp commited_at = 10000;
}
message UpdateUserRequest {
  User user = 1;
}
message UpdateUserResponse {
  google.protobuf.Timestamp commited_at = 10000;
}
message SoftDeleteUserRequest {
  string user_id = 1;
  bool is_delete = 2;
}
message SoftDeleteUserResponse {
  google.protobuf.Timestamp commited_at = 10000;
}
message DeleteUserRequest {
  string user_id = 1;
}
message DeleteUserResponse {}
message ImportUsersRequest {
  repeated User users = 1;
}
message ImportUsersResponse {}

message AgreeContractRequest {
  string user_id = 1;
}
message AgreeContractResponse {
  google.protobuf.Timestamp commited_at = 10000;
}
